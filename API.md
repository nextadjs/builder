# API Documentation

## OpenRTB version 2.6

### BidRequestBuilder

A builder for constructing OpenRTB 2.6 bid request objects.

#### Import

```typescript
import { BidRequestBuilder } from "@nextad/builder/v26";
```

#### Constructor

```typescript
const builder = new BidRequestBuilder();
```

#### Methods

##### Top-level parameters

- withId(id: string): Sets the bid request ID (automatically generated using UUID if not specified)
- withTest(test: 0 | 1): Sets the test mode flag
- withAuctionType(at: number): Sets the auction type
- withAllImps(allimps: 0 | 1): Sets the all impressions flag.
- withCurrencies(cur: string[]): Sets the accepted currencies
- withWhitelistedSeats(wseat: string[]): Sets the list of allowed buyer seats
- withBlockedSeats(bseat: string[]): Sets the list of blocked buyer seats

##### Object parameters

- withSite(site: Partial<SiteV26>): Sets the site object.
- withApp(app: Partial<AppV26>): Sets the app object.
- withDOOH(dooh: Partial<DOOHV26>): Sets the dooh object.
- withDevice(device: Partial<DeviceV26>): Sets the device object.
- withUser(user: Partial<UserV26>): Sets the user object.
- withSource(source: Partial<SourceV26>): Sets the source object.
- withRegulations(regs: Partial<RegsV26>): Sets the regulation object.

##### Impression management

- withCommonImp(props: Partial<ImpV26>): Sets the common parameters for all impression
- addImp(props?: Partial<ImpV26>): Adds a new impression object (properties are optional)

##### build

- build(): Returns the final bid request. 

#### Usage

```typescript
const request = new BidRequestBuilder()
  .withId("request-1")
  .withTimeout(500)
  .withSite({
    id: "site1",
    domain: "example.com",
  })
  .withCommonImp({
    secure: 1,
    bidfloor: 1.0,
    bidfloorcur: "USD",
  })
  .addImp({
    banner: {
      w: 300,
      h: 250,
    },
  })
  .build();
```

### BidResponseBuilder

A builder for constructing OpenRTB 2.6 bid response objects.

#### Import

```typescript
import { BidResponseBuilder } from "@nextad/builder/v26";
```

#### Constructor

```typescript
const builder = new BidResponseBuilder();
```

#### Methods

##### Top-level parameters

- withId(id: string): Sets the bid response ID (automatically generated using UUID if not specified)
- withBidId(bidid: string): Sets the response ID generated by the bidder
- withCurrency(cur: string): Sets the bid currency
- withCustomData(customdata: string): Sets custom data for cookies
- withNoBidReason(nbr: number): Sets the reason for no bid
- withExt(ext: Record<string, unknown>): Sets extension data

##### Seat Bid Management

- beginSeatBid(seat?: string): Starts a new seat bid section
- withGroup(group: 0 | 1): Sets the group flag for the current seat bid
- withCommonBid(props: Partial<BidV26>): Sets common properties for all bids in the current seat bid

##### Bid Management

- addBid(props: Partial<BidV26> & { impid: string; price: number }): Adds a new bid
- addBannerBid(props: Partial<BidV26> & { impid: string; price: number }): Adds a new banner ad bid
- addVideoBid(props: Partial<BidV26> & { impid: string; price: number }): Adds a new video ad bid
- addAudioBid(props: Partial<BidV26> & { impid: string; price: number }): Adds a new audio ad bid
- addNativeBid(props: Partial<BidV26> & { impid: string; price: number }): Adds a new native ad bid

##### Build

- build(): Returns the final BidResponse object

#### Usage

```typescript
const response = new BidResponseBuilder()
  .withId("response-1")
  .withCurrency("USD")
  .beginSeatBid("seat1")
  .withCommonBid({
    adomain: ["advertiser.com"],
    cat: ["IAB1"],
  })
  .addBannerBid("imp1", 3.5, "<creative>", {
    w: 300,
    h: 250,
  })
  .build();
```